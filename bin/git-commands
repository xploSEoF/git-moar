#!/bin/bash

raw=0

while getopts "r" opt;do
	case $opt in
		r)
			raw=1
			;;
		?)
			;;
	esac
done
shift $(($OPTIND-1))

output=$(sed -nE "/^git $1( |\$)/{:a;p;n;/^git/b;ba}" /var/git/local/commands)

alias=$(echo "$output"|sed -n '2p'|sed -nE 's/	Alias for "git ([a-z0-9-]+)"/\1/p')

if [[ "$alias" != "" ]];then
	output="$output

$(git commands -r $alias)
"
fi

if [[ "$raw" == "0" ]];then
	echo "$output"|less -S
else
	echo "$output"
fi
